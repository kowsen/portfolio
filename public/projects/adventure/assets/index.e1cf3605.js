var Je=Object.defineProperty;var Ze=(e,t,o)=>t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var x=(e,t,o)=>(Ze(e,typeof t!="symbol"?t+"":t,o),o);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}})();function _(){}const Ve=e=>e;function ge(e,t){for(const o in t)e[o]=t[o];return e}function Re(e){return e()}function pe(){return Object.create(null)}function B(e){e.forEach(Re)}function Xe(e){return typeof e=="function"}function Q(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let G;function ye(e,t){return G||(G=document.createElement("a")),G.href=t,e===G.href}function Qe(e){return Object.keys(e).length===0}function Ce(e,...t){if(e==null)return _;const o=e.subscribe(...t);return o.unsubscribe?()=>o.unsubscribe():o}function et(e,t,o){e.$$.on_destroy.push(Ce(t,o))}const De=typeof window<"u";let tt=De?()=>window.performance.now():()=>Date.now(),Pe=De?e=>requestAnimationFrame(e):_;const P=new Set;function Ye(e){P.forEach(t=>{t.c(e)||(P.delete(t),t.f())}),P.size!==0&&Pe(Ye)}function ot(e){let t;return P.size===0&&Pe(Ye),{promise:new Promise(o=>{P.add(t={c:e,f:o})}),abort(){P.delete(t)}}}function T(e,t){e.appendChild(t)}function L(e,t,o){e.insertBefore(t,o||null)}function A(e){e.parentNode.removeChild(e)}function Be(e,t){for(let o=0;o<e.length;o+=1)e[o]&&e[o].d(t)}function I(e){return document.createElement(e)}function j(e){return document.createTextNode(e)}function M(){return j(" ")}function nt(){return j("")}function D(e,t,o,n){return e.addEventListener(t,o,n),()=>e.removeEventListener(t,o,n)}function y(e,t,o){o==null?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}function st(e){return Array.from(e.childNodes)}function se(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function be(e,t){e.value=t==null?"":t}function we(e,t,o,n){o===null?e.style.removeProperty(t):e.style.setProperty(t,o,n?"important":"")}function E(e,t,o){e.classList[o?"add":"remove"](t)}function it(e,t,{bubbles:o=!1,cancelable:n=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,o,n,t),s}let q;function $(e){q=e}function ue(){if(!q)throw new Error("Function called outside component initialization");return q}function at(e){ue().$$.on_mount.push(e)}function rt(e){ue().$$.on_destroy.push(e)}function lt(){const e=ue();return(t,o,{cancelable:n=!1}={})=>{const s=e.$$.callbacks[t];if(s){const a=it(t,o,{cancelable:n});return s.slice().forEach(i=>{i.call(e,a)}),!a.defaultPrevented}return!0}}const H=[],V=[],K=[],ke=[],ut=Promise.resolve();let ie=!1;function ht(){ie||(ie=!0,ut.then(ze))}function ae(e){K.push(e)}const te=new Set;let F=0;function ze(){const e=q;do{for(;F<H.length;){const t=H[F];F++,$(t),ct(t.$$)}for($(null),H.length=0,F=0;V.length;)V.pop()();for(let t=0;t<K.length;t+=1){const o=K[t];te.has(o)||(te.add(o),o())}K.length=0}while(H.length);for(;ke.length;)ke.pop()();ie=!1,te.clear(),$(e)}function ct(e){if(e.fragment!==null){e.update(),B(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ae)}}const J=new Set;let U;function dt(){U={r:0,c:[],p:U}}function ft(){U.r||B(U.c),U=U.p}function Y(e,t){e&&e.i&&(J.delete(e),e.i(t))}function X(e,t,o,n){if(e&&e.o){if(J.has(e))return;J.add(e),U.c.push(()=>{J.delete(e),n&&(o&&e.d(1),n())}),e.o(t)}else n&&n()}const mt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function We(e){e&&e.c()}function he(e,t,o,n){const{fragment:s,on_mount:a,on_destroy:i,after_update:u}=e.$$;s&&s.m(t,o),n||ae(()=>{const r=a.map(Re).filter(Xe);i?i.push(...r):B(r),e.$$.on_mount=[]}),u.forEach(ae)}function ce(e,t){const o=e.$$;o.fragment!==null&&(B(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function gt(e,t){e.$$.dirty[0]===-1&&(H.push(e),ht(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function de(e,t,o,n,s,a,i,u=[-1]){const r=q;$(e);const l=e.$$={fragment:null,ctx:null,props:a,update:_,not_equal:s,bound:pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:pe(),dirty:u,skip_bound:!1,root:t.target||r.$$.root};i&&i(l.root);let h=!1;if(l.ctx=o?o(e,t.props||{},(c,g,...w)=>{const b=w.length?w[0]:g;return l.ctx&&s(l.ctx[c],l.ctx[c]=b)&&(!l.skip_bound&&l.bound[c]&&l.bound[c](b),h&&gt(e,c)),g}):[],l.update(),h=!0,B(l.before_update),l.fragment=n?n(l.ctx):!1,t.target){if(t.hydrate){const c=st(t.target);l.fragment&&l.fragment.l(c),c.forEach(A)}else l.fragment&&l.fragment.c();t.intro&&Y(e.$$.fragment),he(e,t.target,t.anchor,t.customElement),ze()}$(r)}class fe{$destroy(){ce(this,1),this.$destroy=_}$on(t,o){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(o),()=>{const s=n.indexOf(o);s!==-1&&n.splice(s,1)}}$set(t){this.$$set&&!Qe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function pt(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}const C=[];function He(e,t=_){let o;const n=new Set;function s(u){if(Q(e,u)&&(e=u,o)){const r=!C.length;for(const l of n)l[1](),C.push(l,e);if(r){for(let l=0;l<C.length;l+=2)C[l][0](C[l+1]);C.length=0}}}function a(u){s(u(e))}function i(u,r=_){const l=[u,r];return n.add(l),n.size===1&&(o=t(s)||_),u(e),()=>{n.delete(l),n.size===0&&(o(),o=null)}}return{set:s,update:a,subscribe:i}}function Te(e){return Object.prototype.toString.call(e)==="[object Date]"}function re(e,t){if(e===t||e!==e)return()=>e;const o=typeof e;if(o!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map((s,a)=>re(e[a],s));return s=>n.map(a=>a(s))}if(o==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Te(e)&&Te(t)){e=e.getTime(),t=t.getTime();const a=t-e;return i=>new Date(e+i*a)}const n=Object.keys(t),s={};return n.forEach(a=>{s[a]=re(e[a],t[a])}),a=>{const i={};return n.forEach(u=>{i[u]=s[u](a)}),i}}if(o==="number"){const n=t-e;return s=>e+s*n}throw new Error(`Cannot interpolate ${o} values`)}function yt(e,t={}){const o=He(e);let n,s=e;function a(i,u){if(e==null)return o.set(e=i),Promise.resolve();s=i;let r=n,l=!1,{delay:h=0,duration:c=400,easing:g=Ve,interpolate:w=re}=ge(ge({},t),u);if(c===0)return r&&(r.abort(),r=null),o.set(e=s),Promise.resolve();const b=tt()+h;let d;return n=ot(f=>{if(f<b)return!0;l||(d=w(e,i),typeof c=="function"&&(c=c(e,i)),l=!0),r&&(r.abort(),r=null);const S=f-b;return S>c?(o.set(e=i),!1):(o.set(e=d(g(S/c))),!0)}),n.promise}return{set:a,update:(i,u)=>a(i(s,e),u),subscribe:o.subscribe}}function Ie(e,t,o){const n=e.slice();return n[7]=t[o],n}function bt(e){let t,o=e[3],n=[];for(let s=0;s<o.length;s+=1)n[s]=Ee(Ie(e,o,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();t=nt()},m(s,a){for(let i=0;i<n.length;i+=1)n[i].m(s,a);L(s,t,a)},p(s,a){if(a&8){o=s[3];let i;for(i=0;i<o.length;i+=1){const u=Ie(s,o,i);n[i]?n[i].p(u,a):(n[i]=Ee(u),n[i].c(),n[i].m(t.parentNode,t))}for(;i<n.length;i+=1)n[i].d(1);n.length=o.length}},d(s){Be(n,s),s&&A(t)}}}function wt(e){let t,o;return{c(){t=I("span"),o=j(e[1]),y(t,"class","subtext svelte-11a4l6j")},m(n,s){L(n,t,s),T(t,o)},p(n,s){s&2&&se(o,n[1])},d(n){n&&A(t)}}}function kt(e){let t,o,n,s;return{c(){t=I("img"),ye(t.src,o=e[2])||y(t,"src",o),y(t,"alt",""),y(t,"class","svelte-11a4l6j")},m(a,i){L(a,t,i),n||(s=D(t,"load",e[6]),n=!0)},p(a,i){i&4&&!ye(t.src,o=a[2])&&y(t,"src",o)},d(a){a&&A(t),n=!1,s()}}}function Ee(e){let t,o=_e(e[7].text)?" ":"",n,s=e[7].text+"",a;return{c(){t=I("span"),n=j(o),a=j(s),y(t,"class","svelte-11a4l6j"),E(t,"accent",e[7].kind==="accent")},m(i,u){L(i,t,u),T(t,n),T(t,a)},p(i,u){u&8&&o!==(o=_e(i[7].text)?" ":"")&&se(n,o),u&8&&s!==(s=i[7].text+"")&&se(a,s),u&8&&E(t,"accent",i[7].kind==="accent")},d(i){i&&A(t)}}}function Tt(e){let t;function o(a,i){return a[2]?kt:a[1]?wt:bt}let n=o(e),s=n(e);return{c(){t=I("p"),s.c(),y(t,"class","svelte-11a4l6j"),E(t,"command",e[3][0]&&e[3][0].kind==="command"),E(t,"current",e[0])},m(a,i){L(a,t,i),s.m(t,null)},p(a,[i]){n===(n=o(a))&&s?s.p(a,i):(s.d(1),s=n(a),s&&(s.c(),s.m(t,null))),i&8&&E(t,"command",a[3][0]&&a[3][0].kind==="command"),i&1&&E(t,"current",a[0])},i:_,o:_,d(a){a&&A(t),s.d()}}}function It(e){if(e.startsWith("[")&&e.endsWith("]"))return e.slice(1,-1)}function Et(e){if(e.startsWith("<")&&e.endsWith(">"))return e.slice(1,-1)}function _t(e){if(e.indexOf(">")===0)return[{kind:"command",text:e}];const t=[],o=e.split(" ");let n="";for(const s of o)s.length===0?n+=" ":s.toUpperCase()===s&&s.toLowerCase()!==s&&s.length>1?(t.push({kind:"normal",text:n}),!s[s.length-1].match(/[a-zA-Z]/g)?(t.push({kind:"accent",text:s.slice(0,s.length-1)}),n=s[s.length-1]):(t.push({kind:"accent",text:s}),n="")):(n&&(n+=" "),n+=s);return n&&t.push({kind:"normal",text:n}),t}function _e(e){return e[0]?e[0].match(/[a-zA-Z]/g):!1}function St(e,t,o){let n,s,a,{text:i}=t,{current:u}=t;const r=lt(),l=()=>r("image-load");return e.$$set=h=>{"text"in h&&o(5,i=h.text),"current"in h&&o(0,u=h.current)},e.$$.update=()=>{e.$$.dirty&32&&o(3,n=_t(i)),e.$$.dirty&32&&o(2,s=It(i)),e.$$.dirty&32&&o(1,a=Et(i))},[u,a,s,n,r,i,l]}class vt extends fe{constructor(t){super(),de(this,t,St,Tt,Q,{text:5,current:0})}}function Se(e,t,o){const n=e.slice();return n[13]=t[o],n[15]=o,n}function ve(e){let t,o;return t=new vt({props:{text:e[13],current:e[15]>=e[0].length-e[1]}}),t.$on("image-load",e[9]),{c(){We(t.$$.fragment)},m(n,s){he(t,n,s),o=!0},p(n,s){const a={};s&1&&(a.text=n[13]),s&3&&(a.current=n[15]>=n[0].length-n[1]),t.$set(a)},i(n){o||(Y(t.$$.fragment,n),o=!0)},o(n){X(t.$$.fragment,n),o=!1},d(n){ce(t,n)}}}function Nt(e){let t,o,n,s,a=e[0],i=[];for(let r=0;r<a.length;r+=1)i[r]=ve(Se(e,a,r));const u=r=>X(i[r],1,1,()=>{i[r]=null});return{c(){t=I("div");for(let r=0;r<i.length;r+=1)i[r].c();y(t,"class","adventure-text svelte-xsh4vb"),E(t,"scroll-locked",e[3])},m(r,l){L(r,t,l);for(let h=0;h<i.length;h+=1)i[h].m(t,null);e[10](t),o=!0,n||(s=D(window,"resize",e[6]),n=!0)},p(r,[l]){if(l&35){a=r[0];let h;for(h=0;h<a.length;h+=1){const c=Se(r,a,h);i[h]?(i[h].p(c,l),Y(i[h],1)):(i[h]=ve(c),i[h].c(),Y(i[h],1),i[h].m(t,null))}for(dt(),h=a.length;h<i.length;h+=1)u(h);ft()}l&8&&E(t,"scroll-locked",r[3])},i(r){if(!o){for(let l=0;l<a.length;l+=1)Y(i[l]);o=!0}},o(r){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)X(i[l]);o=!1},d(r){r&&A(t),Be(i,r),e[10](null),n=!1,s()}}}const Ne=700,At=250;function Ot(e,t,o){let n,s=[],{displayText:a=[]}=t,{currentLines:i=0}=t,u=!1,r,l;const h=yt(0,{duration:Ne,easing:pt});et(e,h,f=>o(8,n=f));function c(){setTimeout(()=>{clearTimeout(r);const f=l.scrollHeight-l.offsetHeight;h.set(l.scrollTop,{duration:0}),h.set(f),o(3,u=!0),r=setTimeout(()=>{o(3,u=!1)},Ne)})}let g;function w(){clearTimeout(g),g=setTimeout(()=>{c()},At)}rt(()=>{clearTimeout(r)});const b=()=>c();function d(f){V[f?"unshift":"push"](()=>{l=f,o(2,l),o(8,n)})}return e.$$set=f=>{"displayText"in f&&o(0,a=f.displayText),"currentLines"in f&&o(1,i=f.currentLines)},e.$$.update=()=>{e.$$.dirty&260&&l&&o(2,l.scrollTop=n,l),e.$$.dirty&129&&a!==s&&(o(7,s=a),c())},[a,i,l,u,h,c,w,s,n,b,d]}class xt extends fe{constructor(t){super(),de(this,t,Ot,Nt,Q,{displayText:0,currentLines:1})}}const Lt=["north","east","south","west","look","inventory","help","invalid"],Ut=["examine","take","drop","use"],Ae={north:"n",east:"e",south:"s",west:"w",look:"l",examine:"x",take:"t",drop:"d",use:"u",inventory:"i",help:"h",invalid:"invalid"};function $e(e,t){e=e.toLowerCase()||"look";let[o,...n]=e.split(" ");n=n.filter(i=>!!i);let s=Lt.find(i=>o===i||o===Ae[i]);if(s==="look"&&n.length>0&&(s=void 0,o="examine"),s)return{kind:"room",command:s,input:s};const a=Ut.find(i=>o===i||o===Ae[i]);if(console.log(a,n),a)if(n.length>0){const i=n.join(" ");return{kind:"item",command:a,item:i,input:`${a} ${i}`}}else return{kind:"room",command:"invalid",input:e,errorMessage:`What do you want to ${a.toUpperCase()}?`};return t.includes(e)?$e(`examine ${e}`,t):{kind:"room",command:"invalid",input:e}}function R(e){return typeof e=="string"?({print:t})=>{t(e)}:e instanceof Array?({print:t})=>{for(const o of e)t(o)}:e}const Z="inventory";class Rt{constructor(t){x(this,"takeOrder",["letter"]);this.items=t}getItemName(t){return this.items.get(t).name}takeItem(t){this.items.get(t).location=Z,this.takeOrder.push(t)}dropItem(t,o){this.items.get(t).location=o,this.takeOrder=this.takeOrder.filter(n=>n!==t)}hasItem(t){return this.isItemInLocation(t,Z)}isItemInLocation(t,o){return this.items.get(t).location===o}getInventory(){return this.takeOrder.map(t=>this.items.get(t)).filter(t=>t.location===Z).map(t=>t.name)}getDrops(){const t={};for(const o of this.items.keys())t[o]=this.items.get(o).location;return t}}function Ct(e){return{...e,examine:a=>{var l;const{print:i,location:u,inventory:r}=a;!r.isItemInLocation(e.id,u)&&!r.hasItem(e.id)?i(`You don't see the ${e.name.toUpperCase()} in the room or your pockets.`):R((l=e.examine)!=null?l:`You don't see anything interesting about the ${e.name.toUpperCase()}.`)(a)},take:a=>{const{print:i,location:u,inventory:r}=a;r.hasItem(e.id)?i(`You're already holding the ${e.name.toUpperCase()}.`):r.isItemInLocation(e.id,u)?e.take?R(e.take)(a):i(`You don't see any way to take the ${e.name.toUpperCase()}.`):i(`You don't see the ${e.name.toUpperCase()} in the room.`)},drop:a=>{const{print:i,location:u,inventory:r}=a;r.hasItem(e.id)?e.drop?R(e.drop)(a):i(`You don't see anywhere to put the ${e.name.toUpperCase()}.`):i(`You're not holding the ${e.name.toUpperCase()}.`)},use:a=>{var l;const{print:i,location:u,inventory:r}=a;!r.isItemInLocation(e.id,u)&&!r.hasItem(e.id)?i(`You don't see the ${e.name.toUpperCase()} in the room or your pockets.`):R((l=e.use)!=null?l:`You don't see any way to use the ${e.name.toUpperCase()}.`)(a)}}}function Dt(e){return{north:"There is no exit to the NORTH.",east:"There is no exit to the EAST.",south:"There is no exit to the SOUTH.",west:"There is no exit to the WEST.",look:"You don't see anything of note.",help:["You can type NORTH, EAST, SOUTH, or WEST to move, and LOOK to get details on the current room.","The EXAMINE, TAKE, DROP, and USE commands let you interact with items that are near you or in your INVENTORY.","Type HELP at any time to see these instructions."],inventory:({print:t,inventory:o})=>{const n=o.getInventory();n.length===0?t("You aren't holding any items."):t(`Inventory: ${n.join(", ").toUpperCase()}`)},invalid:({print:t,lastInput:o})=>{var n;t((n=o.errorMessage)!=null?n:"Invalid command. Type HELP for instructions.")},postProcess:()=>{},skipExitsText:!1,...e}}class Pt{constructor(t,o,n){x(this,"rooms",new Map);x(this,"items",new Map);x(this,"inventory");x(this,"state");x(this,"isBlocked",He(!1));x(this,"location","");for(const s of t)this.rooms.set(s.id,Dt(s));for(const s of o)this.items.set(s.id,Ct(s));this.inventory=new Rt(this.items),this.state=n,this.location=t[0].id}getItemNames(){return Array.from(this.items.values()).map(t=>t.name)}act(t,o){const n=[];t.input&&n.push(`> ${t.input.toUpperCase()}`);const a={print:u=>{n.push(u)},move:u=>{this.location=u,this.act({kind:"room",command:"look"},r=>{n.push(...r)})},lastInput:t,location:this.location,inventory:this.inventory,state:this.state,blockInput:()=>{this.isBlocked.set(!0)},unblockInput:u=>{o(u,!0),this.isBlocked.set(!1)}},i=this.rooms.get(this.location);if(t.kind==="room"&&(R(i[t.command])(a),t.command==="look"&&!i.skipExitsText)){const r=c=>{let g=!1;const w={...a,print:b=>{},move:b=>{g=!0}};return R(i[c])(w),g},l=["north","east","south","west"].filter(c=>r(c)).map(c=>c.toUpperCase());let h="";if(l.length===0)h=void 0;else if(l.length===1)h=`There is an exit to the ${l[0]}.`;else if(l.length===2)h=`There are exits to the ${l[0]} and ${l[1]}.`;else{const c=l.slice(0,l.length-1).join(", "),g=l[l.length-1];h=`There are exits to the ${c}, and ${g}.`}h&&n.push(h)}if(t.kind==="item"){const r=Array.from(this.items.values()).filter(l=>l.name===t.item);if(r.length===0)n.push(`I don't recognize the item: ${t.item.toUpperCase()}.`);else{const l=r.filter(g=>this.inventory.hasItem(g.id)||this.inventory.isItemInLocation(g.id,this.location)),h=l.length>0?l[0]:r[0];R(h[t.command])(a)}}i.postProcess(a),o(n)}}const Yt=["colorful","glossy","purple","doll","titanium","game","deck","painful","sword"],Bt=[["domestic-painting","purple"],["stellar-painting","titanium"],["urban-painting","glossy"],["nature-painting","painful"],["majestic-painting","colorful"]];function Oe(e){var o;return(o=["zero","one","two","three","four","five","six","seven","eight","nine"][e])!=null?o:`${e}`}function k(e,t,o,n,s){const a=n?"hangs on the wall":"sits on the floor",i=n?"hanging on the wall":"sitting on the floor";o.isItemInLocation("domestic-painting",e)?t(`The image of a friendly boy with horns stares at you from a DOMESTIC PAINTING ${i}.`):o.isItemInLocation("stellar-painting",e)?t(`A STELLAR PAINTING ${a}, giving you a glimpse into the cosmos.`):o.isItemInLocation("urban-painting",e)?t(`A vast cityscape has been captured in the URBAN PAINTING ${i}.`):o.isItemInLocation("nature-painting",e)?t(`A NATURE PAINTING ${i} portrays a day in a bustling market with an interesting character in the background.`):o.isItemInLocation("majestic-painting",e)?t(`A MAJESTIC PAINTING ${a}, showing a truly amazing creature in a moment of reflection.`):s&&t(s)}function zt(e,t,o,n,s){if(s.paintingsLocked){o(`The ${n.getItemName(e).toUpperCase()} has locked itself to the wall. You must have put it where it wants to be.`);return}let a="off the ground";n.isItemInLocation("purple-design",t)?a=", revealing a PURPLE DESIGN on the wall underneath it":n.isItemInLocation("titanium-design",t)?a=", revealing a TITANIUM DESIGN on the wall underneath it":n.isItemInLocation("glossy-design",t)?a=", revealing a GLOSSY DESIGN on the wall underneath it":n.isItemInLocation("painful-design",t)?a=", revealing a PAINFUL DESIGN on the wall underneath it":n.isItemInLocation("colorful-design",t)&&(a=", revealing a COLORFUL DESIGN on the wall underneath it"),o(`You take the ${n.getItemName(e).toUpperCase()} ${a}.`),n.takeItem(e)}async function xe(e,t,o,n,s){const a=["domestic-painting","stellar-painting","urban-painting","nature-painting","majestic-painting"];for(const r of a)if(n.isItemInLocation(r,t)){o(`You don't see anywhere to put the ${n.getItemName(r).toUpperCase()}.`);return}let i="";if(n.isItemInLocation("purple-design",t)?i="PURPLE DESIGN":n.isItemInLocation("titanium-design",t)?i="TITANIUM DESIGN":n.isItemInLocation("glossy-design",t)?i="GLOSSY DESIGN":n.isItemInLocation("painful-design",t)?i="PAINFUL DESIGN":n.isItemInLocation("colorful-design",t)&&(i="COLORFUL DESIGN"),!i){o(`You don't see anywhere to put the ${n.getItemName(e).toUpperCase()}.`);return}n.dropItem(e,t);let u=!0;for(const[r,l]of Bt)if(n.getDrops()[r]!==l){u=!1;break}u?(s.paintingsLocked=!0,o(`As you place the ${n.getItemName(e).toUpperCase()} over the ${i}, you feel it lock itself to the wall with a mighty thud. If you'd had a better grip on it you might be down a couple of fingers.`)):o(`You hang the ${n.getItemName(e).toUpperCase()} on the wall, covering the ${i}.`)}function z(e){return{take:({location:t,print:o,inventory:n,state:s})=>{zt(e,t,o,n,s)},drop:({location:t,print:o,inventory:n,state:s,blockInput:a,unblockInput:i})=>{xe(e,t,o,n,s)},use:({location:t,print:o,inventory:n,state:s,blockInput:a,unblockInput:i})=>{xe(e,t,o,n,s)}}}function v(e){return{id:`${e}-switch`,name:"switch",location:e,examine:({state:t,print:o})=>{t.sequence.includes(e)?o("You don't see the SWITCH in the room or your pockets."):(o('The SWITCH sits atop a podium in the center of the room. It appears to be in the "off" position.'),o("It looks like it would make a very satisfying sound if you were to flip it."))},use:({state:t,print:o,blockInput:n,unblockInput:s})=>{t.sequence.includes(e)?o("You don't see the SWITCH in the room or your pockets."):(o('As you flip the SWITCH to the "on" position, the podium twists ninety degrees and shoots into the ground with a hollow thunk.'),o("A small panel of the floor slams shut behind it, leaving behind no evidence that a podium was ever there."),t.sequence.push(e),t.sequence.length===9&&o("You hear an exceptionally loud buzzer go off somewhere in the house. It sounds like it came from the upper floor."))}}}function N(e,t,o){t.sequence.includes(e)||o("In the center of the room sits a large SWITCH attached to the top of a podium.")}function p(e){return t=>{t.move(e)}}function oe(e,t,o){JSON.stringify(e.slice(-4))===JSON.stringify(["north","west","south","west"])?t("woods-end"):o("You're still in the middle of a chunk of woods that appears to stretch out in all directions. You swear that it looked like it only took up one screen of space - if only there was a cranky old woman around that you could ask for directions.")}const Wt=[{id:"start",look:["You're standing at the front entrance of the supposedly abandoned house. It's looking a little shabby, but not like haunted shabby or anything like that.","The front door to the NORTH looks to be unlocked, waiting for you to walk in. There's also a handwritten SIGN above it with a cryptic message."],north:p("titanium"),skipExitsText:!0},{id:"purple",look:({print:e,location:t,state:o,inventory:n})=>{e("This appears to be a bedroom, or at the very least it's a room with a bed in it. That ought to be enough to make something a bedroom. Some games and comics are strewn about the room, but nothing you recognize."),k(t,e,n,!0,"There's a PURPLE DESIGN on one of the walls."),N(t,o,e),e("Other rooms lie to the NORTH and EAST, and the foyer's over to the WEST.")},north:p("glossy"),east:p("doll"),west:p("titanium"),skipExitsText:!0},{id:"game",look:({print:e,location:t,state:o,inventory:n})=>{e("It smells like you're either in a party room or a half hearted attempt at adding a gym to an otherwise unused room. It's hard to tell for sure, all you know is that sweat still hangs in the air. There's a setup with a horizontal metal ROD set up in the corner."),k(t,e,n,!1),N(t,o,e),e("There's a door to the foyer to the EAST, a room to the SOUTH, and a door outside to the woods to the WEST.")},west:p("woods"),east:p("titanium"),south:p("colorful"),skipExitsText:!0},{id:"woods",look:({print:e,location:t,state:o,inventory:n})=>{e("You're in the middle of a chunk of woods that appears to stretch out in all directions."),e("There are exits to the NORTH, EAST, SOUTH, and WEST.")},east:({move:e,print:t})=>{t("As you walk to the EAST, you barely take two steps before you're back inside the house. Strange, you thought you'd walked out further than that."),le.woods=[],e("game")},north:({print:e,state:t,move:o})=>{t.woods.push("north"),e("You walk NORTH for a bit."),oe(t.woods,o,e)},west:({print:e,state:t,move:o})=>{t.woods.push("west"),e("You walk WEST for a bit."),oe(t.woods,o,e)},south:({print:e,state:t,move:o})=>{t.woods.push("south"),e("You walk SOUTH for a bit."),oe(t.woods,o,e)},skipExitsText:!0},{id:"woods-end",look:({print:e,location:t,state:o,inventory:n})=>{e("You finally emerge from the woods into a small clearing. A brook babbles nearby as the woodland critters eye you with mild interest."),k(t,e,n,!1),e("The only exit is to the EAST, the woods are too thick everywhere else.")},east:({move:e,print:t})=>{t("As you walk back into the woods, you barely take two steps before you're back inside the house. Strange, you thought you'd walked out further than that."),le.woods=[],e("game")},skipExitsText:!0},{id:"colorful",look:({print:e,location:t,state:o,inventory:n})=>{e("This room has all the telltale signs of an office, empty notebooks, packages of sticky notes, and lamps meant to imitate the sun line the shelves."),k(t,e,n,!0,"There's a COLORFUL DESIGN on one of the walls."),N(t,o,e),e("The only exit is back to the NORTH.")},north:p("game"),skipExitsText:!0},{id:"titanium",look:({print:e,location:t,state:o,inventory:n})=>{e("You're in the main foyer of the house. Contrasting the run-down exterior, the inside's looking pretty well taken care of. It's not fancy or anything, but it isn't shabby either."),k(t,e,n,!0,"There's a TITANIUM DESIGN on one of the walls."),N(t,o,e),e("Doors to the NORTH, EAST, and WEST lead to other rooms, while the door to the SOUTH will take you back outside.")},north:p("deck"),east:p("purple"),south:p("start"),west:p("game"),skipExitsText:!0},{id:"doll",look:({print:e,location:t,state:o,inventory:n})=>{e("It looks like this room was set up to be some kind of schooling area. How rich were these people that they could dedicate an entire room of their house to this? There's a boxy DOLL sitting in the corner."),k(t,e,n,!1),N(t,o,e),e("The only exit is back to the WEST.")},west:p("purple"),skipExitsText:!0},{id:"glossy",look:({print:e,location:t,state:o,inventory:n})=>{e("This must be the living room, or at least it's a room with some couches. There's no television though, which makes the couch situation confusing. How do you know what direction to point them?"),k(t,e,n,!0,"There's a GLOSSY DESIGN on one of the walls."),N(t,o,e),e("There are doors to other rooms to the SOUTH and WEST, and stairs down to the basement to the NORTH.")},north:p("painful"),south:p("purple"),west:p("deck"),skipExitsText:!0},{id:"deck",look:({print:e,location:t,state:o,inventory:n})=>{e("This looks to be an entire room dedicated to playing cards. There's a few tables with that green felt that's very satisfying to slide things on. On one of them sits a DECK of cards."),k(t,e,n,!1),N(t,o,e),e("Doors to the EAST and SOUTH lead to other rooms, while stairs to the NORTH go up to a second level.")},north:p("end"),east:p("glossy"),south:p("titanium"),skipExitsText:!0},{id:"painful",look:({print:e,location:t,state:o,inventory:n})=>{e("Oof, unlike the other rooms you can believe that this basement is part of an abandoned house. But hey, maybe that's just how most basements are. It's not quite slimy, but it's certainly slimy-adjacent."),k(t,e,n,!0,"There's a PAINFUL DESIGN on one of the walls."),N(t,o,e),e("A thick door is slightly ajar to the EAST, or the stairs back to the main level are to the SOUTH.")},east:p("sword"),south:p("glossy"),skipExitsText:!0},{id:"sword",look:({print:e,location:t,state:o,inventory:n})=>{o.isSafeOpen?e(`At one point this must have been a storage room, but now it's just a bunch of empty shelves. Or make that mostly empty - a shelf marked "second" still holds a faded CARTRIDGE and scuffed CD.`):e(`At one point this must have been a storage room, but now it's just a bunch of empty shelves. Or make that mostly empty - a shelf marked "second" still holds a faded CARTRIDGE and scuffed CD and there's a SAFE over in the corner.`),k(t,e,n,!1),N(t,o,e),e("The only exit is back to the WEST.")},west:p("painful"),skipExitsText:!0,invalid:({lastInput:e,print:t,state:o,inventory:n})=>{o.isWordle?(e.input==="helix"?(o.isSafeOpen=!0,n.dropItem("majestic-painting","sword"),n.dropItem("safe","void"),n.dropItem("shirt-button","void"),n.dropItem("zebra-button","void"),n.dropItem("troll-button","void"),n.dropItem("ready-button","void"),t("With a triumphant beep, the safe pops open, spits out a MAJESTIC PAINTING, and then vanishes so it won't clutter up the room description any more.")):t("The keyboard beeps at you indignantly, as if offended by what you typed into it, and shoots back into the safe."),o.isWordle=!1):t("Invalid command. Type HELP for instructions.")},postProcess:({print:e,state:t})=>{t.isWordle&&(e("Tired of waiting for you, the keyboard shoots back into the safe."),t.isWordle=!1),t.wantsWordle&&(t.wantsWordle=!1,t.isWordle=!0)}},{id:"end",look:({print:e,location:t,state:o,inventory:n})=>{e("Well, this must be the vault. Unlike the rest of the house, the upstairs looks a bit like what set designers in the 1970s thought a spaceship might look like. A large metal door sits on the other side of a row of controls."),o.sequence.length===9?e("The only controls you can make sense of are some BUTTONS and a PANEL of strange, glowing symbols."):o.sequence.length>0?e("The only controls you can make sense of are some BUTTONS and a PANEL of strange, partially glowing symbols."):e("The only controls you can make sense of are some BUTTONS and a PANEL of strange symbols."),k(t,e,n,!1),e("Since the door to the NORTH is locked, the only exit is down the stairs to the SOUTH.")},south:p("deck"),north:"You try forcing the metal door open, but to no avail.",skipExitsText:!0}],Ht=[{id:"letter",name:"letter",location:Z,examine:["Hey pal, what's up? It's been a while. Feels like we don't talk much these days but hey life's busy, I get it.","What was I talking about again? Oh yes, the vault.","I have it on good authority that a locked door in this house holds riches beyond your wildest dreams. Or so they say at least. I guess that's for you to find out.","Happy hunting!","- Kyle","<P.S. This puzzle is gaming themed and will require a decent amount of gaming knowledge to solve. Looking things up online is expected (and probably required). Hit me up at me@kylebyte.com if you get stuck or just want to chat about the puzzle!>"],drop:({print:e})=>{e("This is far too important to leave lying around.")}},{id:"sign",name:"sign",location:"start",examine:["Mounted a few feet above the door, the SIGN reads...","[./inscription.png]","Normally this would make you grumble a bit, but in this case it's almost too confusing to feel pretentious."],take:"You try leaping up to grab the SIGN, but it's just a bit out of reach. You can always come back if you need to read it anyways."},{id:"rod",name:"rod",location:"game",examine:"A waist high ROD is suspended on both sides. It looks like the height is adjustable and if the bar were knocked with any kind of force it'd slip right out and fall down.",use:({print:e})=>{Math.random()>.5?(e("Something deep inside your brain compels you to lean backwards and attempt to go under the ROD. It brushes the tip of your nose, but you make it under and hop up on the other side in excitement!"),e("If only someone had been here to see your triumph.")):(e("Something deep inside your brain compels you to lean backwards and attempt to go under the ROD. Your body makes it under fine, but as you try to duck your head under you whack your chin on the ROD and it falls to the ground, followed closely by you."),e("Good thing nobody was around to see that. You pick up the bar and put it back up where you found it."))}},{id:"doll",name:"doll",location:"doll",examine:"Despite being boxy and somewhat mechanical looking with some gnarly looking wings, the DOLL is strangely adorable.",use:"Left knee, left wing, right wing, right arm. Hrm, I thought for sure that was the pattern to get to the maze...",take:"It seems so comfortable in this room, it'd be a shame to take it somewhere else."},{id:"safe",name:"safe",location:"sword",examine:["Unlike a normal SAFE, you only see four buttons and a small light that's currently off.","There's a SHIRT BUTTON, a ZEBRA BUTTON, a TROLL BUTTON, and finally a big green READY BUTTON."],use:"You don't see a way to USE the SAFE directly. Try using one of the buttons you see when you EXAMINE the safe."},{id:"shirt-button",name:"shirt button",location:"sword",examine:"The SHIRT BUTTON is a small, round button with a picture of a shirt on it. It looks like a comfy shirt, if a bit plain.",use:"As you press the SHIRT BUTTON, the small light flashes a very faint white once, a bright yellow twice, and a faint white twice again."},{id:"zebra-button",name:"zebra button",location:"sword",examine:"The ZEBRA BUTTON is a small, round button with a picture of a zebra on it. You aren't certain if it's white with black stripes or the other way around..",use:"As you press the ZEBRA BUTTON, the small light flashes a very faint white once, a bright green once, and a faint white three more times."},{id:"troll-button",name:"troll button",location:"sword",examine:"The TROLL BUTTON is a small, round button with a picture of a troll on it. It's emerging from the ground, grabbing a Volkswagen Beetle and pulling it down into the earth.",use:"As you press the TROLL BUTTON, the small light flashes a very faint white three times, a bright yellow once, and a faint white one last time."},{id:"ready-button",name:"ready button",location:"sword",examine:`The READY BUTTON is a large green button with the word "Ready" printed on it. It's basically explained in the name.`,use:({print:e,state:t})=>{for(const o of["As you press the READY BUTTON, a small keyboard shoots out from below the buttons.","What do you want to type?","<Enter the text you want to type into the keyboard.>"])e(o);t.wantsWordle=!0}},{id:"deck",name:"deck",location:"deck",examine:"A DECK of exactly 34 playing cards. Either some are missing or this is like those ones you accidentally buy at the convenience store sometimes that are missing cards on purpose for some game that you don't know.",use:({print:e,state:t})=>{t.hasDrawn?e("You draw a card. It's the Ace of Diamonds again! Which isn't surprising, seeing as you put it back on top of the DECK after your drew it."):(e("You draw a card. It's the Ace of Diamonds! Feeling weird about separating it from its friends, you put it back."),t.hasDrawn=!0)},take:({print:e,state:t})=>{t.hasDrawn?e("You don't want to take all 34 cards, so you just draw one instead. It's the Ace of Diamonds again! Which isn't surprising, seeing as you put it back on top of the DECK after your drew it."):(e("You don't want to take all 34 cards, so you just draw one instead. It's the Ace of Diamonds! Feeling weird about separating it from its friends, you put it back."),t.hasDrawn=!0)}},{id:"cartridge",name:"cartridge",location:"sword",examine:["The label of the rounded, black CARTRIDGE is so faded and torn that you can't make out much except for a general blueish-purple vibe and a yellow strip on the left hand side of the label.","Something about it is bringing up childhood memories of a sidekick getting a starring role and saving the day by getting tethered to a crocodile."],take:"While it looks like the CARTRIDGE is just sitting on the shelf, it is in fact nailed down onto it."},{id:"cd",name:"cd",location:"sword",examine:["It looks like the CD's always been mostly black on both sides, but whatever designs used to be on the front have been mostly lost to time.","Looking at it is filling you with a strong desire to find a typewriter so you can take a break."],take:"While it looks like the CD is just sitting on the shelf, it is in fact glued down onto it."},{id:"buttons",name:"buttons",location:"end",examine:({print:e,move:t,location:o,state:n,inventory:s})=>{n.sequence.length===9?e("Two of the buttons are labeled - a START BUTTON that's flashing green like it desperately wants you to push it, and a RESET BUTTON with a dim red glow."):n.sequence.length>0?e("Two of the buttons are labeled - a START BUTTON that's slowly pulsing green, and a RESET BUTTON with a dim red glow."):e("Two of the buttons are labeled - a START BUTTON and a RESET BUTTON. Both look like they can light up, but they're currently dark.")},use:"You need to EXAMINE the BUTTONS and use a specific one."},{id:"start-button",name:"start button",location:"end",examine:({print:e,move:t,location:o,state:n,inventory:s})=>{n.sequence.length===9?e("The START BUTTON is one of those big round plastic buttons that people hit to buzz in on a game show. It's flashing a brilliant green."):n.sequence.length>0?e("The START BUTTON is one of those big round plastic buttons that people hit to buzz in on a game show. It's pulsing a dull green color."):e("The START BUTTON is one of those big round plastic buttons that people hit to buzz in on a game show.")},use:async({print:e,move:t,location:o,state:n,inventory:s,blockInput:a})=>{if(n.sequence.length===9)if(JSON.stringify(n.sequence)===JSON.stringify(Yt)){n.hasWon=!0;for(const u of["After a brief pause, the metal doors in front of you slowly part. Behind them, you find piles of dubloons and other treasure type things. Hooray!","Hidden amongst them, you find a note. It reads:","Congratulations on solving the puzzle and finding the treasure! I knew you could do it. I mean I didn't know that about you specifically since I don't really know who you are, but you know what I mean.","Drop me a message if you enjoyed the puzzle! You can reach me at me@kylebyte.com.","Love ya!","- Kyle"])e(u);a()}else n.sequence=[],e("The lights on the PANEL and BUTTONS all turn off with a sad thud. You hear nine crashes from the house behind you.");else e("You try pushing the START BUTTON, but it doesn't budge. It feels like something's locking it in place.")}},{id:"reset-button",name:"reset button",location:"end",examine:({print:e,move:t,location:o,state:n,inventory:s})=>{n.sequence.length>0?e("The RESET BUTTON is smaller than its neighbor - it's more like a button from an arcade machine. It has a dim red glow."):e("The RESET BUTTON is smaller than its neighbor - it's more like a button from an arcade machine.")},use:async({print:e,move:t,location:o,state:n,inventory:s,blockInput:a,unblockInput:i})=>{if(n.sequence.length>0){const u=n.sequence.length===1?"a crash":`${Oe(n.sequence.length)} crashes`;e(`The lights on the PANEL and BUTTONS all turn off suddenly. You hear ${u} from the house behind you.`),n.sequence=[]}else e("Nothing seems to happen.")}},{id:"panel",name:"panel",location:"end",examine:({print:e,move:t,location:o,state:n,inventory:s})=>{n.sequence.length===0?e("The strange symbols are arranged in one long line (but are split into two levels here for artistic reasons). They look fairly dim in the light of the room."):n.sequence.length<9?e(`The strange symbols are arranged in one long line (but are split into two levels here for artistic reasons). Some look fairly dim in the light of the room, but the first ${Oe(n.sequence.length*2)} are glowing a brilliant blue.`):e("The strange symbols are arranged in one long line (but are split into two levels here for artistic reasons). All of them are glowing a brilliant blue."),e(`[./panel/${n.sequence.length}.png]`)}},{id:"domestic-painting",name:"domestic painting",location:"purple",examine:["A young boy is emerging from a house with a red roof, surrounded by his friends and neighbors in a growing town. Maybe you're projecting but he looks to be a good lad, at least relative to the rest of the population.","Looking closely, you see telltale signs that some infernal heritage has left a clear imprint on his appearance."],...z("domestic-painting")},{id:"stellar-painting",name:"stellar painting",location:"woods-end",examine:["A giant owl stands atop the world, gazing up into the cosmos.","They appear to be quite happy in the wild, but you can tell that they dream of the stars."],...z("stellar-painting")},{id:"urban-painting",name:"urban painting",location:"doll",examine:["A centaur relaxes at the base of a tree, enjoying a book as the hustle and bustle of everyday folk goes on around them.","A vast city sits in the background, promising untold opportunity."],...z("urban-painting")},{id:"nature-painting",name:"nature painting",location:"colorful",examine:["A goblin looms in the background of a market, ready to pounce at any moment and begin a new reign of terror.","The vendors continue trading of rare leaves and spices and go about their day, none the wiser."],...z("nature-painting")},{id:"majestic-painting",name:"majestic painting",location:"void",examine:["A golden dragon pauses as they head through a small settlement, giving its mighty wings a rest and spending some time on its feet.","It looks out to the horizon, contemplating the new day it finds itself in."],...z("majestic-painting")},{id:"glossy-design",name:"glossy design",location:"glossy",examine:["Unlike the rest of the wall, this painting-sized design is pure white and smooth to the touch.","It reflects the light of the room back at you, reminding you of what people in the past thought the future would look like."]},{id:"purple-design",name:"purple design",location:"purple",examine:["Unlike the rest of the wall, this painting-sized design is a calming purple with a black circle in the middle.","It feels strange to see the design from the side rather than from above."]},{id:"painful-design",name:"painful design",location:"painful",examine:["Unlike the rest of the wall, this painting-sized design is covered in a filter you can only describe as painful.","Images distort and twist inside as you move from side to side. Luckily, you're at least seven years old so it doesn't cause any vision damage."]},{id:"titanium-design",name:"titanium design",location:"titanium",examine:["Unlike the rest of the wall, this painting-sized design is made of titanium, or at least something titanium colored.","Is titanium a color? You're pretty sure you've heard it used as one once but you're not totally sure."]},{id:"colorful-design",name:"colorful design",location:"colorful",examine:["Unlike the rest of the wall, this painting-sized design is made up of two colors split right down the middle - a faded red and blue.","On closer inspection, it looks like the design could get damaged pretty easily. Might be good to keep an extra around."]},v("purple"),v("game"),v("colorful"),v("titanium"),v("doll"),v("glossy"),v("deck"),v("painful"),v("sword")],le={sequence:[],hasDrawn:!1,isFirstLook:!0,paintingsLocked:!1,woods:[],wantsWordle:!1,isWordle:!1,isSafeOpen:!1,hasWon:!1},W=new Pt(Wt,Ht,le),Le=["You walk up to the abandoned house, your mysterious contact's LETTER in your back pocket.","Though a part of you (a rather large part to be honest) doesn't believe or trust them, the riches they promised were too good to dismiss out of hand.","If anyone can get through this mysterious locked door, it's going to be you.","<Press Enter to continue...>"];const{document:Ue}=mt;function $t(e){let t,o,n,s,a,i,u,r,l,h,c,g,w,b;return n=new xt({props:{displayText:e[2],currentLines:e[3]}}),{c(){t=I("main"),o=I("div"),We(n.$$.fragment),s=M(),a=I("div"),i=I("span"),i.textContent=">",u=M(),r=I("input"),l=M(),h=I("div"),c=M(),y(i,"class","pre-input svelte-186v3yn"),y(r,"type","text"),y(r,"class","input-box svelte-186v3yn"),y(r,"maxlength","36"),y(r,"autocomplete","off"),y(r,"autocorrect","off"),y(r,"autocapitalize","off"),y(r,"spellcheck","false"),r.disabled=e[7],y(h,"class","cursor svelte-186v3yn"),we(h,"left",`${e[5]}px`),E(h,"hidden",e[6]),y(a,"class","input-area svelte-186v3yn"),y(o,"class","content svelte-186v3yn"),y(t,"class","svelte-186v3yn")},m(d,f){L(d,t,f),T(t,o),he(n,o,null),T(o,s),T(o,a),T(a,i),T(a,u),T(a,r),be(r,e[0]),e[13](r),T(a,l),T(a,h),L(d,c,f),g=!0,w||(b=[D(r,"keydown",e[8]),D(r,"input",e[12]),D(Ue.body,"click",e[14]),D(Ue.body,"touchend",e[15])],w=!0)},p(d,[f]){const S={};f&4&&(S.displayText=d[2]),f&8&&(S.currentLines=d[3]),n.$set(S),(!g||f&128)&&(r.disabled=d[7]),f&1&&r.value!==d[0]&&be(r,d[0]),(!g||f&32)&&we(h,"left",`${d[5]}px`),f&64&&E(h,"hidden",d[6])},i(d){g||(Y(n.$$.fragment,d),g=!0)},o(d){X(n.$$.fragment,d),g=!1},d(d){d&&A(t),ce(n),e[13](null),d&&A(c),w=!1,B(b)}}}const jt=22,qt=12;function Gt(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function ne(e){window.parent&&window.parent.postMessage({kind:e},"*")}function Mt(e,t,o){let n,s,a,i,u=_,r=()=>(u(),u=Ce(a,m=>o(7,i=m)),a);e.$$.on_destroy.push(()=>u());let l,h="",c=Le,g=Le.length,w=!0,b=!1,d=!0;setInterval(()=>{o(10,b=!b)},800);let f;function S(m,O){o(2,c=c.concat(m)),o(3,g=O?m.length+g:m.length)}function je(){if(!i){if(w){w=!1,W.act({kind:"room",command:"look"},S),o(0,h="");return}W.location,W.act($e(h,W.getItemNames()),S),o(0,h="")}}function qe(m){const O=[9,33,34,35,36,37,38,39,40];(m.ctrlKey||O.includes(m.keyCode))&&(m.preventDefault(),m.stopPropagation()),m.keyCode===13&&(m.preventDefault(),m.stopPropagation(),je()),m.keyCode===27&&(m.preventDefault(),m.stopPropagation(),ne("fullscreen-exit")),o(11,d=!1),clearTimeout(f),f=setTimeout(()=>{o(11,d=!0)},1e3)}function me(){if(!Gt()){l.focus();return}const m=document.createElement("input");m.setAttribute("type","text");const O=m.style;O.position="absolute",O.opacity=0,O.height=0,O.fontSize="16px",l.prepend(m),m.focus(),setTimeout(()=>{l.focus(),m.remove()},100)}function ee(){me(),ne("fullscreen-enter")}ne("fullscreen"),at(()=>{me(),new ResizeObserver(([m])=>{document.documentElement.style.setProperty("--page-width",`${m.contentRect.width}`)}).observe(document.documentElement)});function Ge(){h=this.value,o(0,h)}function Me(m){V[m?"unshift":"push"](()=>{l=m,o(1,l)})}const Fe=()=>ee(),Ke=()=>ee();return e.$$.update=()=>{e.$$.dirty&3072&&o(6,n=b&&d),e.$$.dirty&1&&o(5,s=jt+h.length*qt)},r(o(4,a=W.isBlocked)),[h,l,c,g,a,s,n,i,qe,ee,b,d,Ge,Me,Fe,Ke]}class Ft extends fe{constructor(t){super(),de(this,t,Mt,$t,Q,{})}}new Ft({target:document.getElementById("app")});
